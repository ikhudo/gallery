# --- SPA Routing ---
# Try mod_rewrite first (fastest)
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Prevent Apache from appending trailing slash to directories
  # (e.g. /gallery â†’ /gallery/) since they are SPA routes
  DirectorySlash Off

  # Only skip rewriting for actual files (not directories!)
  # /gallery is both a SPA route and a real directory with images,
  # so we must NOT exclude directories from rewriting.
  RewriteCond %{REQUEST_FILENAME} !-f

  # Rewrite everything else to index.php (PHP fallback router)
  RewriteRule ^ index.php [L]
</IfModule>

# If mod_rewrite is unavailable, use FallbackResource
<IfModule !mod_rewrite.c>
  FallbackResource /index.php
</IfModule>

# Make index.php the default directory index (before index.html)
DirectoryIndex index.php index.html

# --- Caching ---
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
</IfModule>
